<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manage Timeslot</title>
     <!-- Top Nav bar CSS styles -->
     <link rel="stylesheet" href="/Assets/css/navbar.css?version=4">
     <!-- File Specific CSS Styles -->
    <link rel="stylesheet" href="/Assets/css/SpArenaManager/manage-timeslots.css?version=9">
    <link rel="stylesheet" href="/Assets/css/SpArenaManager/sidebar.css?version=10">
    <!-- Manifest file -->
    <link rel="manifest" href="/./manifest.json" />
    <script src="https://kit.fontawesome.com/3220c9480a.js" crossorigin="anonymous"></script>
</head>

<body>
 <!-- Top Navigation Bar -->
 <nav>
    <div class="nav-left">
        <div class="logo-container">
            <a href="/">
                <i class="fas fa-running "></i>
                <span class="logo-name">Sportizza</span>
            </a>
        </div>

                <div
                    class="nav-right">
                    <!-- Profile button -->
                    <div class="nav-profile">
                        <button class="openbutton" onclick="openpopupform()">
                            <div class="profile-details">
                                <img src={{ current_user.profile_pic }} class="profile-picture">
                                <div class="username">{{ current_user.first_name }}
                                    {{ current_user.last_name }}</div>
                            </div>
                        </button>
                    </div>

                    <!-- Signout button -->
                    <div class="sign-in-out-btn">
                        <button onclick="open_popup_signout_message()">Sign Out</button>
                    </div>
                </div>
            </div>
        </nav>

        <!-- start popup for profile -->
        <div id="myForm" class="sectionpopnav">
            <div class="formsectionprofile" id="formEditUserProfile">
                <div>
                    <button class="closebutton" onclick="closepopupform()">❌</button>
                </div>

                <div class="nav-user-edit-from">
                    <div class="details">
                        <div class="input-box">
                            <h5>Name:</h5>
                            <p>
                                {{ current_user.first_name }}
                                {{ current_user.last_name }}
                            </p>
                        </div>
                        <div class="input-box">
                            <h5>Username:</h5>
                            <p>
                                {{ current_user.username }}
                            </p>
                        </div>
                        <div class="input-box">
                            <h5>Mobile:</h5>
                            <p>
                                {{ current_user.primary_contact }}</p>
                        </div>
                    </div>
                    <div class="editProPic">
                        <img id="form-profile-picture" src={{ current_user.profile_pic }} alt="">
                    </div>
                </div>
                <div class="edit-profile-link">
                    <a href="\Edituserdetails\EditProfileAction">Edit Profile</a>
                </div>
            </div>
        </div>
        <!-- end popup for profile -->

        <!-- start pop up sign out section -->
        <div id="popup_signout" class="sectionpopnav">
            <div class="formsectionnav">
                <div>
                    <button class="closebutton" onclick="close_popup_signout_message()">❌</button>
                </div>
                <form action="/action_page.php" style="margin:20px">
                    <div style="margin:auto">
                        <h1>Sign Out</h1>
                        <p>Do your really want to sign out now?</p>
                    </div>
                </form>
                <div style="display:flex">
                    <button class="popup_buttonnav">
                        {% if current_user %}
                            <a href="/logout">
                                YES</a>
                        {% endif %}
                    </button>
                    <button onclick="close_popup_signout_message()" class="popup_delete_buttonnav">
                        NO
                    </button>
                </div>
            </div>
        </div>
        <!-- end pop up sign out section -->

        <!-- End Top Navigation Bar -->


        <!-- Start OF the POP up Timeslot Delete -->
            <div id="popup_delete" class="sectionpop "> <div class="formsection">
                <div>
                    <button class="closebutton" onclick="close_popup_delete_message()">❌</button>
                </div>
                <form action="/Sparenamanager/removetimeslot/" style="margin:20px" method="post" id="delete_timeslot_form">
                    <div style="margin:auto">
                        <h1>
                            Timeslot Deletion
                        </h1>
                        <p>
                            Do you really want to delete this timeslot?
                        </p>
                    </div>
                    <div style="display:flex">

                        <button class="popup_delete_button" type="submit">
                            YES
                        </button>
                        <button onclick="close_popup_delete_message()" type="button" class="popup_button">
                            NO
                        </button>
                    </div>
                </form>
            </div>
        </div>
        <!-- End OF the POP up Facility delete -->


        <section
            class="page-container">

            <!-- SIDE NAVIGATION BAR - START -->
            <div class="sidebar">
                <div class="sidebar-container">
                    <div class="side-menu">
                        <i class="fas fa-bars fa-2x " id="side-menu-open-btn"></i>
                        <i class="fas fa-times fa-2x" id="side-menu-close-btn"></i>
                    </div>
                    <ul class="side-menu-list">
                        <li>
                            <a href="/Sparenamanager" class="side-menu-li">
                                <i class="fas fa-home"></i>
                                <p class="side-menu-item">Arena Profile</p>
                            </a>
                            <p class="side-menu-tooltip">Arena Profile</p>
                        </li>
                        <li>
                            <a href="/Sparenamanager/managebookings" class="side-menu-li">
                                <i class="fas fa-bookmark"></i>
                                <p class="side-menu-item">Manage Bookings</p>
                            </a>
                            <p class="side-menu-tooltip">Bookings</p>
                        </li>
                        <li>
                            <a href="/Sparenamanager/managernotification" class="side-menu-li">
                                <i class="fas fa-bell"></i>
                                <span class="badge">{{notificationsCount}}</span>
                                <p class="side-menu-item">Notifications</p>
                            </a>
                            <p class="side-menu-tooltip">Notifications</p>
                        </li>
                        <li>
                            <a href="/Sparenamanager/managetimeslot" class="side-menu-li">
                                <i class="fas fa-clock"></i>
                                <p class="side-menu-item">Manage Timeslot</p>
                            </a>
                            <p class="side-menu-tooltip">Timeslot</p>
                        </li>
                        <li>
                            <a href="/Sparenamanager/managefacility" class="side-menu-li">
                                <i class="fas fa-building"></i>
                                <p class="side-menu-item">Manage Facility</p>
                            </a>
                            <p class="side-menu-tooltip">Facility</p>
                        </li>

                        <li>
                            <a href="/Sparenamanager/manageusers" class="side-menu-li">
                                <i class="fas fa-users"></i>
                                <p class="side-menu-item">Manage Staff</p>
                            </a>
                            <p class="side-menu-tooltip">Manage Staff</p>
                        </li>
                        <li>
                            <a href="/Sparenamanager/manageanalytics" class="side-menu-li">
                                <i class="fas fa-chart-bar"></i>
                                <p class="side-menu-item">Analytics</p>
                            </a>
                            <p class="side-menu-tooltip">Analytics</p>
                        </li>
                    </ul>
                </div>
            </div>
            <!-- SIDE NAVIGATION BAR - END -->

            <!-- Manage Timeslot Page -->
            <div class="page-content-container">
                <div class="container">
                    <h1 class="page-header">Manage Timeslots</h1>
                    <div class="tab">
                        <button class="booking_tab tab-btn active" onclick="openTab(event, 'view_bookings')">
                            <i class="fas fa-eye"></i>
                            <p>View Timeslots</p>
                        </button>
                        <button class="booking_tab tab-btn" onclick="openTab(event, 'add_bookings')">
                            <i class="fas fa-plus-circle"></i>
                            <p>Add Timeslots</p>
                        </button>
                        <button class="booking_tab tab-btn" onclick="openTab(event, 'cancel_booking')">
                            <i class="fas fa-trash-alt"></i>
                            <p>Delete Timeslots</p>
                        </button>
                    </div>

                    <!-- View Timeslots Tab -->
                    <div id="view_bookings" class="booking_tab_content active" style="display: block;">
                        <table class="booking-table" id="view-timeslot">
                            <thead>
                                <tr class="booking-thead-first-tr">
                                    <th class="booking-table-first-th">
                                        <div class="booking-table-filter-container">
                                            <div class="booking-table-search-container">
                                                <input type="search" name="search" placeholder="Search By Facility Name" id="search-view-timeslot" onkeyup="searchViewTable()">
                                                <i class="fas fa-search"></i>
                                            </div>

                                        </div>
                                    </th>
                                </tr>
                                <tr class="booking-thead-second-tr">
                                    <th class="b-first-th">Timeslot ID</th>
                                    <th>Start Time</th>
                                    <th>End Time</th>
                                    <th>Amount(LKR)</th>
                                    <th class="b-last-th">Facility Name</th>

                                </tr>
                            </thead>
                            <tbody>
                                {% for timeSlot in timeSlots %}
                                    <tr>
                                        <td data-label="Timeslot ID :">{{ timeSlot.time_slot_id }}</td>
                                        <td data-label="Start Time :">{{ timeSlot.startTime }}</td>
                                        <td data-label="End Time :">{{ timeSlot.endTime }}</td>
                                        <td data-label="Amount(LKR) :">{{ timeSlot.price }}</td>
                                        <td data-label="Facility Name :">{{ timeSlot.facility_name }}</td>
                                    </tr>
                                {% endfor %}

                            </tbody>
                        </table>
                    </div>
                    <!-- Add Timeslots Tab -->
                    <div id="add_bookings" class="booking_tab_content">
                        <div id="staff-add" class="add-booking-fm-con">
                            <form class="add-booking-frm-content animate" action="/Sparenamanager/manageraddtimeslots" method="post" onsubmit="validateAddTimeslotForm()" id="formAddTimeslot">
                                <div class="input-row">
                                    <div class="input-box">


                                        <label for="startTime">Start Time:</label>

                                        <select id="startTime" name="startTime">
                                            <option value="0">Please Select Start Time</option>
                                            {% set hours = ["05","06","07","08", "09", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22"] %}
                                            {% set minutes = ["00","30"] %}
                                            {% for hour in hours %}
                                                {% for mins in minutes %}
                                                    <option value="{{ hour }}:{{ mins }}">{{ hour }}:{{ mins }}</option>
                                                {% endfor %}
                                            {% endfor %}

                                        </select>
                                        <div class="helper-text" id="firstNameMsg"></div>
                                    </div>
                                </div>
                                <div class="input-row">
                                    <div class="input-box">
                                        <label for="timeSlotDuration">Duration:</label>
                                        <select id="timeSlotDuration" name="timeSlotDuration">
                                            <option value="0">Please Select Time Duration</option>

                                            <option value="1">One hours</option>

                                            <option value="2">Two hours</option>

                                        </select>
                                        <div class="helper-text" id="firstNameMsg"></div>
                                    </div>
                                </div>
                                <div class="input-row">
                                    <div class="input-box">
                                        <label for="slotPrice">Slot Price (LKR):</label>
                                        <input id="slotPrice" type="text" name="slotPrice" onfocusout="validatePrice()" placeholder="Enter Timeslot Price" value="{{ sp_arena.slot_price }}">
                                        <div class="helper-text" id="firstNameMsg"></div>
                                    </div>
                                </div>
                                <div class="input-row">
                                    <div class="input-box">
                                        <label for="facilityName">Facility:</label>
                                        <div id="facility-name-display" class="user-type-div">
                                            <select id="facilityName" name="facilityName" onchange="validateFacilitySelect()" value="{{ sp_arena.facility }}">
                                                <option value="0">Please select a facility</option>
                                                {% for facility in selectFacility %}
                                                    <option value="{{ facility.facility_id }}">{{ facility.facility_name }}</option>
                                                {% endfor %}
                                            </select>
                                            <div class="helper-text" id="imgMsg6"></div>
                                        </div>

                                    </div>
                                </div>

                                <div class="button">
                                    <input id="timeSlotbutton" type="submit" value="Add Time slot" class="popup_button"/>
                                </div>
                            </form>
                        </div>
                    </div>
                    <!-- Delete Timeslots Tab -->
                    <div id="cancel_booking" class="booking_tab_content">
                        <table class="booking-table" id="delete-timeslot">
                            <thead>
                                <tr class="booking-thead-first-tr">
                                    <th class="booking-table-first-th">
                                        <div class="booking-table-filter-container">
                                            <div class="booking-table-search-container">
                                                <input type="search" name="search" placeholder="Search By Facility Name" id="search-delete-timeslot" onkeyup="searchDeleteTable()">
                                                <i class="fas fa-search"></i>
                                            </div>
                                        </div>
                                    </th>
                                </tr>
                                <tr class="booking-thead-second-tr">
                                    <th class="b-first-th">Timeslot ID</th>
                                    <th>Start Time</th>
                                    <th>End Time</th>
                                    <th>Amount(LKR)</th>
                                    <th>Facility Name</th>
                                    <th class="b-last-th">Action</th>
                                </tr>
                            </thead>
                            <tbody>

                                {% for timeSlot in deleteTimeSlots %}
                                    <tr>
                                        <td data-label="Timeslot ID :">{{ timeSlot.time_slot_id }}</td>
                                        <td data-label="Start Time :">{{ timeSlot.startTime }}</td>
                                        <td data-label="End Time :">{{ timeSlot.endTime }}</td>
                                        <td data-label="Amount(LKR) :">{{ timeSlot.price }}</td>
                                        <td data-label="Facility Name :">{{ timeSlot.facility_name }}</td>
                                        <td class="trash-btn-padding-res">
                                            <button onclick="open_popup_delete_message('{{ timeSlot.time_slot_id }}')" class="trash-btn">
                                                <i class="fas fa-trash-alt"></i>
                                            </button>
                                        </td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>

                </div>
            </div>
        </section>
        <!-- Start of Footer -->
        <footer>
            <div class="copyright">
                <p>
                    Copyright &copy;2021 All rights reserved | Sportizza Inc.
                </p>
            </div>
        </footer>
        <!-- End of Footer -->
        <!-- JQuery Library -->
        <!-- Validation JS --><script type="text/javascript" src="/Assets/js/signup_validation.js?version=9.0"> </script>
        <!-- Top navbar js -->
        <script type="text/javascript" src="/Assets/js/navbar.js?v=8"></script>
        <!-- File specific JS -->
        <script type="text/javascript" src="/Assets/js/SpArenaManager/manage-timeslots.js?version=9"></script>
        <!-- Validate timeslot insertion -->
        <script type="text/javascript" src="/Assets/js/lib/jquery/jquery.min.js"></script>
        <script type="text/javascript" src="/Assets/js/SpArenaManager/manager-validateTimeslot-ajax.js"></script>
    </body>

</html>
